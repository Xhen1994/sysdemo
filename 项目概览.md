# 协同数字化平台 - 项目概览

## 项目信息

- **项目名称**: 协同数字化平台 (Provincial Collaborative Digital Platform)
- **技术栈**: Flask + Bootstrap 5 + Chart.js
- **Python版本**: 3.11
- **部署服务器**: 14.103.165.46:4000
- **数据存储**: JSON/JSONL本地文件
- **AI集成**: DeepSeek API

## 项目结构

```
sysdemo/
│
├── 核心文件
│   ├── app.py                    # Flask应用入口
│   ├── config.py                 # 配置文件
│   └── requirements.txt          # Python依赖
│
├── 数据模型层 (models/)
│   ├── __init__.py
│   ├── user.py                   # 用户模型
│   └── data_manager.py           # 数据管理器（JSON/JSONL操作）
│
├── 路由层 (routes/)
│   ├── __init__.py               # 路由注册
│   ├── auth.py                   # 用户认证（登录/登出）
│   ├── objectives.py             # 目标管理
│   ├── issues.py                 # 问题反馈
│   ├── tasks.py                  # 工作流管理
│   ├── knowledge.py              # 知识库
│   ├── dashboard.py              # 数据看板
│   └── admin.py                  # 系统管理
│
├── 服务层 (services/)
│   ├── __init__.py
│   └── ai_service.py             # AI服务（DeepSeek集成）
│
├── 前端模板 (templates/)
│   ├── base.html                 # 基础模板
│   ├── 404.html / 500.html       # 错误页面
│   ├── auth/                     # 认证相关页面
│   │   └── login.html
│   ├── dashboard/                # 工作台
│   │   └── index.html
│   ├── objectives/               # 目标管理页面
│   │   ├── list.html
│   │   ├── create.html
│   │   └── detail.html
│   ├── issues/                   # 问题反馈页面
│   │   ├── list.html
│   │   ├── create.html
│   │   └── detail.html
│   ├── tasks/                    # 工作流页面
│   │   ├── list.html
│   │   ├── create.html
│   │   └── detail.html
│   ├── knowledge/                # 知识库页面
│   │   ├── list.html
│   │   ├── create.html
│   │   ├── detail.html
│   │   └── edit.html
│   └── admin/                    # 管理页面
│       ├── index.html
│       ├── users.html
│       ├── logs.html
│       └── settings.html
│
├── 数据存储 (data/)
│   ├── users.json                # 用户数据
│   ├── roles.json                # 角色权限
│   ├── objectives.json           # 目标数据
│   ├── issues.jsonl              # 问题反馈（日志格式）
│   ├── tasks.jsonl               # 任务数据（日志格式）
│   ├── knowledge.json            # 知识库
│   ├── system_logs.jsonl         # 系统日志
│   └── uploads/                  # 上传文件目录
│
├── 部署脚本
│   ├── start.sh                  # 启动脚本
│   ├── stop.sh                   # 停止脚本
│   ├── restart.sh                # 重启脚本
│   └── env.example               # 环境变量示例
│
├── 日志目录 (logs/)
│   └── app.log                   # 应用日志
│
└── 文档
    ├── README.md                 # 项目说明
    ├── 部署指南.md               # 详细部署步骤
    ├── 快速开始.md               # 快速入门指南
    └── 项目概览.md               # 本文档
```

## 功能模块详解

### 1. 用户认证与权限管理
- **文件**: `routes/auth.py`, `models/user.py`
- **功能**:
  - 用户登录/登出
  - 密码加密存储
  - 基于角色的权限控制（admin, province_manager, staff）
  - Session管理

### 2. 目标管理模块
- **文件**: `routes/objectives.py`
- **功能**:
  - 目标创建与下发
  - 目标分解（父子目标关系）
  - 进度跟踪与上报
  - 目标审核
  - 统计分析

### 3. 问题反馈模块
- **文件**: `routes/issues.py`, `services/ai_service.py`
- **功能**:
  - 问题提交与分类
  - 优先级管理
  - 问题流转（open → assigned → in_progress → resolved → closed）
  - 评论与讨论
  - **AI智能总结**（DeepSeek API）

### 4. 工作流管理模块
- **文件**: `routes/tasks.py`
- **功能**:
  - 任务创建与派单
  - 自动派单逻辑
  - 工作日志记录
  - 任务验收流程
  - 状态跟踪（pending → assigned → in_progress → completed → verified）

### 5. 知识库模块
- **文件**: `routes/knowledge.py`
- **功能**:
  - Markdown格式支持
  - 分类与标签管理
  - 全文搜索
  - 浏览统计
  - 知识编辑与版本控制

### 6. 数据看板模块
- **文件**: `routes/dashboard.py`
- **功能**:
  - 实时统计数据展示
  - 多维度图表（Chart.js）
  - 目标完成率分析
  - 问题处理效率统计
  - 任务分布可视化

### 7. 系统管理模块
- **文件**: `routes/admin.py`
- **功能**:
  - 用户管理（增删改查）
  - 角色与权限配置
  - 系统日志查看
  - 参数设置
  - 密码重置

## 数据存储设计

### JSON格式（用于列表数据）
- `users.json`: 用户信息
- `roles.json`: 角色权限定义
- `objectives.json`: 目标数据
- `knowledge.json`: 知识库文档

### JSONL格式（用于日志型数据）
- `issues.jsonl`: 问题反馈记录
- `tasks.jsonl`: 任务执行记录
- `system_logs.jsonl`: 系统操作日志

优势：
- 无需数据库配置
- 易于备份和迁移
- 支持版本控制
- 数据可读性强

## 安全特性

1. **密码加密**: 使用Werkzeug的密码哈希
2. **Session管理**: Flask-Login会话管理
3. **权限控制**: 基于角色的访问控制（RBAC）
4. **日志审计**: 记录所有重要操作
5. **输入验证**: 表单数据验证

## AI功能集成

### DeepSeek API集成
- **文件**: `services/ai_service.py`
- **功能**:
  - 问题智能总结
  - 目标进度分析（可扩展）
- **配置**: 需在环境变量中设置 `DEEPSEEK_API_KEY`

## 部署方式

### 开发环境
```bash
python app.py
```

### 生产环境（后台运行）
```bash
./start.sh
```

### 使用Systemd（推荐）
详见《部署指南.md》

### 使用Gunicorn + Nginx
```bash
gunicorn -w 4 -b 0.0.0.0:4000 app:app
```

## 性能特点

- **轻量级**: 无数据库依赖，启动快速
- **低资源**: 内存占用小，适合小型服务器
- **高可用**: 支持后台运行和自动重启
- **易扩展**: 模块化设计，易于添加新功能

## 扩展建议

### 短期扩展
1. 添加文件上传功能
2. 邮件通知功能
3. 数据导出（Excel）
4. 更多AI分析功能

### 长期扩展
1. 迁移到PostgreSQL/MySQL
2. 使用Redis缓存
3. 微服务架构拆分
4. 移动端适配
5. 实时通知（WebSocket）

## 维护建议

1. **定期备份**: 每天自动备份data目录
2. **日志轮转**: 配置logrotate防止日志过大
3. **监控告警**: 设置监控脚本检测服务状态
4. **更新依赖**: 定期更新Python包
5. **安全审计**: 定期检查系统日志

## 默认账号

- **管理员账号**: admin
- **默认密码**: admin123
- **重要提示**: 首次登录后务必修改！

## 端口使用

- **4000**: Flask应用端口
- 如需使用80端口，建议配置Nginx反向代理

## 相关文档

- `README.md`: 项目说明文档
- `部署指南.md`: 详细的服务器部署步骤
- `快速开始.md`: 用户快速入门指南
- 代码注释: 关键代码都有详细注释

## 技术亮点

1. **现代化UI**: Bootstrap 5 + 渐变色设计
2. **响应式布局**: 适配各种屏幕尺寸
3. **数据可视化**: Chart.js图表展示
4. **AI集成**: DeepSeek智能分析
5. **RESTful风格**: 清晰的API设计
6. **模块化架构**: 高内聚低耦合

## 项目特色

- ✅ 零数据库依赖，部署简单
- ✅ 完整的权限管理体系
- ✅ 美观的现代化界面
- ✅ AI智能分析功能
- ✅ 完善的文档体系
- ✅ 生产环境就绪

## 联系方式

如有任何问题或建议，请联系系统管理员。

---

**项目创建时间**: 2025年10月  
**当前版本**: 1.0.0  
**最后更新**: 2025年10月16日

